<div class="navbar main-navbar">
    <div class="user-information">
        <div id="user-information-name" class="user-information-name pull-right">
           {{context.user.displayName}}
        </div>
    </div>

    <nav class="navbar navbar-default navbar-ex1-collapse" style="margin-bottom: 0px;border-radius: 0px">
        <div class="navbar-header">
            <button data-ng-click="state.toggleCollapse()" type="button" class="navbar-toggle">
                <span class="sr-only">Toggle</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
        </div>
        <div data-ng-class="state.isCollapsed ? '' : 'collapse'" class="navbar-collapse navbar-ex1-collapse">
            <div class="container">
                <form class="navbar-form navbar-left form-inline" role="search">
                    <div class="row">
                        <input style="width: 200px" title="Search by keyword" role="" class="form-control searchField" data-ng-model="criteria.keyword" placeholder="Search" id="keyword" type="text">
                        <button data-ng-click="refreshSearch()" class="btn btn-default navbar-btn" role="button" id="instanceSearchButton" type="submit">&nbsp;&nbsp;<i ng-show="searching" class='fa fa-spinner fa-spin fa-lg'></i><i ng-show="!searching" class="fa fa-search"></i>&nbsp;&nbsp;</button>
                        <span data-ng-if="definitions" class="dropdown">
                            <button class="btn btn-default navbar-btn dropdown-toggle" data-toggle="dropdown" data-target="new-form-dropdown" id="new-form-button" type="button"><i class="fa fa-play-circle-o"></i> <b class="caret"></b></button>
                            <ul id="new-form-dropdown" class="dropdown-menu" role="menu" aria-labelledby="new-form-button">
                                <li data-ng-repeat="definition in definitions" class="presentation"><a role="menuitem" href="{{definition.link}}" target="_self">{{definition.task.processDefinitionLabel}}</a></li>
                            </ul>
                        </span>
                    </div>
                    <div class="row">
                        <ul class="navbar-nav">
                            <li>
                                <div class="dropdown">
                                    <a id="filter-button" class="btn btn-link btn-small dropdown-toggle" data-target="limit-dropdown" data-toggle="dropdown" role="button" type="button">
                                        <span class="dropdown-toggle-text">{{processStatusDescription[criteria.processStatus]}}</span>
                                        <b class="caret"></b>
                                    </a>
                                    <ul id="limit-dropdown" class="dropdown-menu form-inline" role="menu" aria-labelledby="filter-button">
                                        <li role="presentation" class="dropdown-header">Process status</li>
                                        <li role="presentation" class="disabled">
                                            <div class="checkbox-menu-item" role="menuitem" tabindex="-1">
                                                <label class="checkbox">
                                                    <input type="checkbox" id="statusOpen" data-ng-change="refreshSearch()" data-ng-model="criteria.processStatus" data-ng-true-value="open" role="menuitem" checked=""/> &nbsp;{{processStatusDescription['open']}}
                                                </label>
                                            </div>
                                        </li>
                                        <li role="presentation">
                                            <div class="checkbox-menu-item" role="menuitem" tabindex="-1">
                                                <label class="checkbox">
                                                    <input type="checkbox" id="statusComplete" data-ng-change="refreshSearch()" data-ng-model="criteria.processStatus" data-ng-true-value="complete" role="menuitem"> &nbsp;{{processStatusDescription['complete']}}
                                                </label>
                                            </div>
                                        </li>
                                        <li role="presentation">
                                            <div class="checkbox-menu-item" role="menuitem" tabindex="-1">
                                                <label class="checkbox">
                                                    <input type="checkbox" id="statusCancelled" data-ng-change="refreshSearch()" data-ng-model="criteria.processStatus" data-ng-true-value="cancelled" role="menuitem"> &nbsp;{{processStatusDescription['cancelled']}}
                                                </label>
                                            </div>
                                        </li>
                                        <li role="presentation">
                                            <div class="checkbox-menu-item" role="menuitem" tabindex="-1">
                                                <label class="checkbox">
                                                    <input type="checkbox" id="statusSuspended" data-ng-change="refreshSearch()" data-ng-model="criteria.processStatus" data-ng-true-value="suspended" role="menuitem"> &nbsp;{{processStatusDescription['suspended']}}
                                                </label>
                                            </div>
                                        </li>
                                        <li role="presentation">
                                            <div class="checkbox-menu-item" role="menuitem" tabindex="-1">
                                                <label class="checkbox">
                                                    <input type="checkbox" id="statusAny" data-ng-change="refreshSearch()" data-ng-model="criteria.processStatus" data-ng-true-value="all" role="menuitem"> &nbsp;{{processStatusDescription['all']}}
                                                </label>
                                            </div>
                                        </li>
                                    </ul>

                                </div>
                            </li>
                            <li>
                                <div class="dropdown">
                                    <a id="task-status-button" class="btn btn-link btn-small dropdown-toggle" data-target="limit-dropdown" data-toggle="dropdown" role="button" type="button">
                                        <span class="dropdown-toggle-text">{{taskStatusDescription[criteria.taskStatus]}}</span>
                                        <b class="caret"></b>
                                    </a>
                                    <ul class="dropdown-menu form-inline" role="menu" aria-labelledby="task-status-button">
                                        <li role="presentation" class="dropdown-header">Task status</li>
                                        <li role="presentation" class="disabled">
                                            <div class="checkbox-menu-item" role="menuitem" tabindex="-1">
                                                <label class="checkbox">
                                                    <input type="checkbox" data-ng-change="refreshSearch()" data-ng-model="criteria.taskStatus" data-ng-true-value="Open" role="menuitem" checked=""/> &nbsp;{{taskStatusDescription['Open']}}
                                                </label>
                                            </div>
                                        </li>
                                        <li role="presentation">
                                            <div class="checkbox-menu-item" role="menuitem" tabindex="-1">
                                                <label class="checkbox">
                                                    <input type="checkbox" data-ng-change="refreshSearch()" data-ng-model="criteria.taskStatus" data-ng-true-value="Complete" role="menuitem"> &nbsp;{{taskStatusDescription['Complete']}}
                                                </label>
                                            </div>
                                        </li>
                                        <li role="presentation">
                                            <div class="checkbox-menu-item" role="menuitem" tabindex="-1">
                                                <label class="checkbox">
                                                    <input type="checkbox" data-ng-change="refreshSearch()" data-ng-model="criteria.taskStatus" data-ng-true-value="Cancelled" role="menuitem"> &nbsp;{{taskStatusDescription['Cancelled']}}
                                                </label>
                                            </div>
                                        </li>
                                        <li role="presentation">
                                            <div class="checkbox-menu-item" role="menuitem" tabindex="-1">
                                                <label class="checkbox">
                                                    <input type="checkbox" data-ng-change="refreshSearch()" data-ng-model="criteria.taskStatus" data-ng-true-value="Suspended" role="menuitem"> &nbsp;{{taskStatusDescription['Suspended']}}
                                                </label>
                                            </div>
                                        </li>
                                        <li role="presentation">
                                            <div class="checkbox-menu-item" role="menuitem" tabindex="-1">
                                                <label class="checkbox">
                                                    <input type="checkbox" data-ng-change="refreshSearch()" data-ng-model="criteria.taskStatus" data-ng-true-value="all" role="menuitem"> &nbsp;{{taskStatusDescription['all']}}
                                                </label>
                                            </div>
                                        </li>
                                    </ul>
                                </div>
                            </li>
                            <li ng-hide="isSingleProcessSelectable()">
                                <div class="dropdown">
                                    <a id="process-definition-button" class="btn btn-link btn-small dropdown-toggle" data-target="limit-dropdown" data-toggle="dropdown" role="button" type="button">
                                        <span class="dropdown-toggle-text">{{processDefinitionDescription[criteria.processDefinitionKey]}}</span>
                                        <b class="caret"></b>
                                    </a>
                                    <ul class="dropdown-menu form-inline" role="menu" aria-labelledby="process-definition-button">
                                        <li role="presentation" class="dropdown-header">Processes</li>
                                        <li data-ng-repeat="definition in definitions" role="presentation">
                                            <div class="checkbox-menu-item" role="menuitem" tabindex="-1">
                                                <label class="checkbox">
                                                    <input type="checkbox" data-ng-change="refreshSearch()" data-ng-model="criteria.processDefinitionKey" data-ng-true-value="{{definition.task.processDefinitionKey}}" role="menuitem" checked=""/> &nbsp;{{definition.task.processDefinitionLabel}}
                                                </label>
                                            </div>
                                        </li>
                                        <li role="presentation">
                                            <div class="checkbox-menu-item" role="menuitem" tabindex="-1">
                                                <label class="checkbox">
                                                    <input type="checkbox" data-ng-change="refreshSearch()" data-ng-model="criteria.processDefinitionKey" data-ng-true-value="" role="menuitem"> &nbsp;{{processDefinitionDescription['']}}
                                                </label>
                                            </div>
                                        </li>
                                    </ul>
                                </div>
                            </li>
                            <li>
                                <div data-ng-hide="dates.isNonCustomDateRange()">
                                    <input type="datetime-local" data-ng-model="dates.customStartedAfter" data-ng-change="dates.refreshCustomDate()" />
                                    <input type="datetime-local" data-ng-model="dates.customStartedBefore" data-ng-change="dates.refreshCustomDate()" />
                                    <button type="button" class="close" data-ng-click="dates.selectDateRange('any')" aria-hidden="true" style="float:none;">&times;</button>
                                </div>
                                <div data-ng-show="dates.isNonCustomDateRange()" class="dropdown">
                                    <a id="date-limit-button" class="btn btn-link btn-small dropdown-toggle" data-target="limit-dropdown" data-toggle="dropdown" role="button" type="button">
                                        <span class="dropdown-toggle-text">{{dates.showNonCustomDateRange()}}</span>
                                        <b class="caret"></b>
                                    </a>
                                    <ul class="dropdown-menu form-inline" role="menu" aria-labelledby="process-definition-button">
                                        <li role="presentation" class="dropdown-header">Date range</li>
                                        <li data-ng-repeat="dateRangeKey in dates.dateRangeKeys" role="presentation">
                                            <div class="checkbox-menu-item" role="menuitem" tabindex="-1">
                                                <label class="checkbox">
                                                    <input type="checkbox" data-ng-change="dates.selectDateRange(dateRangeKey)" data-ng-model="dates.selectedDateRange" data-ng-true-value="{{dateRangeKey}}" role="menuitem" checked="dates.selectedDateRangeKey == dateRangeKey"/> &nbsp;{{dates.dateRanges[dateRangeKey]}}
                                                </label>
                                            </div>
                                        </li>
                                    </ul>
                                </div>
                            </li>
                        </ul>
                    </div>
                </form>
                <div class="navbar-right">
                    <button data-ng-click="dialogs.openAssignModal(getFormsSelected(['Open']))" data-ng-show="isFormSelected(['Open'])" class="btn btn-default navbar-btn incomplete-selected-result-btn" id="assign-dialog-button" title="Assign task" type="button"><i class="fa fa-user fa-white"></i></button>
                    <button data-ng-click="dialogs.openHistoryModal(getFormsSelected())" data-ng-show="isFormSelected()" data-ng-disabled="!isSingleFormSelected()" class="btn btn-default navbar-btn selected-result-btn" id="history-dialog-button" title="History" type="button"><i class="fa fa-calendar-o fa-white"></i></button>
                    <button data-ng-click="dialogs.openActivateModal(getFormsSelected(['Suspended']))" data-ng-show="isFormSelected(['Suspended'])" class="btn btn-default navbar-btn" id="activate-dialog-button" title="Activate process" type="button"><i class="fa fa-play fa-white"></i></button>
                    <button data-ng-click="dialogs.openSuspendModal(getFormsSelected(['Open']))" data-ng-show="isFormSelected(['Open'])" class="btn btn-default navbar-btn" id="suspend-dialog-button" title="Suspend process" type="button"><i class="fa fa-pause fa-white"></i></button>
                    <button data-ng-click="dialogs.openCancelModal(getFormsSelected(['Open','Suspended']))" data-ng-show="isFormSelected(['Open','Suspended'])" class="btn btn-danger navbar-btn incomplete-selected-result-btn" id="delete-dialog-button" title="Cancel process" type="button"><i class="fa fa-trash-o fa-white"></i></button>
                    <button data-ng-click="dialogs.openRestartModal(getFormsSelected(['Cancelled', 'Complete']))" data-ng-show="isFormSelected(['Cancelled', 'Complete'])" class="btn btn-default navbar-btn" title="Restart process" type="button"><i class="fa fa-rotate-left"></i></button>
                    <a data-ng-show="false && !isFormSelected()" href="report.html" rel="external" target="_self" class="btn btn-default navbar-btn" id="report-button"><i class="fa fa-bar-chart-o"></i></a>
                    <button data-ng-click="exportCsv(getFormsSelected())" data-ng-show="!isFormSelected()" data-ng-disabled="!isSingleProcessSelected()" class="btn btn-default navbar-btn" title="Export as CSV" type="button"><i class="fa fa-download"></i> Export</button>
                </div>
            </div>
        </div>
    </nav>
</div>
<div class="container">
    <div class="main-content row">
        <div data-ng-show="notification" class="alert alert-danger">
            <strong>{{notification.title}}</strong> {{notification.message}}
        </div>
        <h2 data-ng-bind="isSingleProcessSelected() ? processDefinitionDescription[criteria.processDefinitionKey] : 'Tasks'"></h2>
        <table class="search-results table table-hover">
            <thead>
            <tr>
                <th><i class="icon-check"></i></th>
                <th>Label</th>
                <th class="hidden-sm hidden-xs">Status</th>
                <th class="hidden-sm hidden-xs">Task</th>
                <th class="hidden-xs">Assignee</th>
                <th>Date</th>
            </tr>
            </thead>
            <tbody>
                <tr data-ng-repeat="form in forms">
                    <td><input data-ng-click="selectForm(form)" type="checkbox" class="result-checkbox"/></td>
                    <td>
                        <a data-ng-if="form.external" href="{{form.link}}" target="_self">{{form.task.processInstanceLabel}}</a>
                        <a data-ng-if="!form.external" href="{{form.link}}">{{form.task.processInstanceLabel}}</a>
                    </td>
                    <td class="hidden-sm hidden-xs">{{form.task.taskStatus}}</td>
                    <td class="hidden-sm hidden-xs" style="cursor:pointer"><span class="use-tooltip" title="{{form.task.taskDescription}}" data-placement="right" data-trigger="hover">{{form.task.taskLabel}}</span></td>
                    <td class="hidden-xs">{{form.task.assignee ? form.task.assignee.displayName : 'Nobody'}}</td>
                    <td>{{form.task.startTime|date:'MMM d, y H:mm'}}<span data-ng-if="form.task.endTime"> - {{form.task.endTime|date:'MMM d, y H:mm'}}</span></td>
                </tr>
            </tbody>
        </table>
    </div>
</div>